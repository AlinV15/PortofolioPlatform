<!-- projects.component.html - Simplified Version like Skills -->
<div class="projects-page" [class.hydrating]="!canInteract" [class.hydrated]="canInteract">



    <!-- Error State - SIMPLIFIED -->
    <div *ngIf="hasError && !isLoading" class="error-state" role="alert">
        <div class="flex flex-col justify-center items-center py-20">
            <div
                class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-8 max-w-md mx-auto text-center">
                <svg class="w-16 h-16 text-red-500 mx-auto mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                    aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h2 class="text-2xl font-semibold text-red-800 dark:text-red-500 mb-4">Failed to Load Projects</h2>
                <p class="text-red-600 dark:text-red-300 mb-6">{{ errorMessage || "We couldn't load the project data.
                    Please try again." }}</p>
                <button (click)="retryLoadAllData()" [disabled]="isLoading"
                    class="px-6 py-3 bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200"
                    type="button">
                    <span *ngIf="isLoading" class="flex items-center justify-center">
                        <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
                        Loading...
                    </span>
                    <span *ngIf="!isLoading">Try Again</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content - SIMPLIFIED CONDITIONS -->
    <ng-container *ngIf="!isLoading && !hasError">

        <!-- Hero Section - SIMPLIFIED INPUTS -->
        <app-projects-hero [projectStats]="projectStats" [categoryDistribution]="categoryDistribution"
            [topTechnologies]="topTechnologies" [isLoadingStats]="false" [isLoadingCategories]="false"
            [isLoadingTechnologies]="false" [hasStatsError]="false" [hasCategoriesError]="false"
            [hasTechnologiesError]="false" (filterChange)="onFilterChange($event)"
            (viewModeChange)="onViewModeChange($event)" (retryStats)="retryLoadAllData()"
            (retryCategories)="retryLoadAllData()" (retryTechnologies)="retryLoadAllData()">
        </app-projects-hero>

        <!-- Projects Grid - SIMPLIFIED -->
        <app-project-grid [allProjects]="allProjects" [activeFilter]="activeFilter" [viewMode]="viewMode"
            [searchTerm]="searchTerm" (projectSelect)="onProjectSelect($event)" id="projects-grid">
        </app-project-grid>

        <!-- Project Stats Section - SIMPLIFIED -->
        <app-project-stats [projectStats]="projectStats" [categoryDistribution]="categoryDistribution"
            [isLoading]="false" [hasError]="false" [projectExperience]="projectExperience" [allProjects]="allProjects"
            class="mt-16">
        </app-project-stats>

        <!-- Project Showcase - SIMPLIFIED -->
        <app-project-showcase *ngIf="hasProjects && canInteract" [projects]="allProjects"
            (projectSelect)="onProjectSelect($event)" class="mt-16">
        </app-project-showcase>

    </ng-container>

    <!-- Project Details Modal - SIMPLIFIED -->
    <ng-container *ngIf="hasSelectedProject && canInteract">
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
            (click)="onCloseProjectDetails()">

            <div class="bg-white dark:bg-gray-800 rounded-lg max-w-4xl max-h-[90vh] overflow-auto relative"
                (click)="$event.stopPropagation()">

                <app-project-details [project]="selectedProject!" [canNavigate]="canNavigateProjects"
                    [isFirst]="isFirstProject" [isLast]="isLastProject" [currentIndex]="currentProjectIndex"
                    [totalProjects]="allProjects.length" (close)="onCloseProjectDetails()"
                    (previous)="onPreviousProject()" (next)="onNextProject()" (demoClick)="onDemoClick($event)"
                    (githubClick)="onGithubClick($event)">
                </app-project-details>

            </div>
        </div>
    </ng-container>

    <!-- Preload Images - SIMPLIFIED -->
    <div *ngIf="hasProjects && canInteract" class="preloader" style="display: none;" aria-hidden="true">
        <img *ngFor="let project of allProjects.slice(0, 6); trackBy: trackByProject" [src]="project.images[0] || ''"
            [alt]="project.title" loading="lazy" width="1" height="1">
    </div>

    <!-- Loading Indicator - SIMPLIFIED -->
    <div *ngIf="isLoading && canInteract"
        class="fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-600 z-50 animate-pulse"
        role="progressbar" aria-label="Loading">
    </div>

</div>